<!DOCTYPE html>
<html>
<head>
    <title>Edit Campaign</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h2>Edit Campaign</h2>
    <form method="POST">
        {% for col in columns %}
            {% if col not in ['TENANTID', 'CAMPAIGNID', 'CREATEDATE', 'RECHARGERNR', 'RECHARGERBR', 'RECHARGETYPE', 'BUNDLETYPE', 'BUNDLE'] %}
                <label>{{ col }}:</label>
                {% if col in ['STARTDATE', 'ENDDATE'] %}
                    <!-- Make STARTDATE and ENDDATE editable with proper date format -->
                    {% set date_value = request.form.get(col, '') or campaign[col] %}
                    <input type="date" name="{{ col }}" value="{{ date_value|string|replace(' 00:00:00', '') if date_value else '' }}"><br><br>
                {% else %}
                    <!-- Make only specific fields editable, others readonly -->
                    {% set field_value = request.form.get(col, '') or campaign[col] %}
                    {% if col in ['CAMPAIGNNAME', 'STATUS', 'FCABUNDLERANGE', 'BVSHITS_TO_FCA_RANGE', 'IFCADATERANGE'] %}
                        <input type="text" name="{{ col }}" value="{{ field_value if field_value is not none else '' }}"><br><br>
                    {% else %}
                        <!-- For numeric fields, ensure empty values instead of None -->
                        <input type="text" name="{{ col }}" value="{{ field_value if field_value is not none else '' }}" readonly style="background-color: #f0f0f0;"><br><br>
                    {% endif %}
                {% endif %}
                
                <!-- Insert BUNDLE after BVSHITS -->
                {% if col == 'BVSHITS' %}
                    <!-- BUNDLE Field (DISABLED) -->
                    <label>BUNDLE:</label>
                    {% set bundle_value = request.form.get('BUNDLE', '') or campaign.BUNDLE %}
                    <select name="BUNDLE" id="BUNDLE" disabled style="background-color: #f0f0f0;">
                        <option value="0" {% if bundle_value == '0' or bundle_value == 0 %}selected{% endif %}>0</option>
                        <option value="1" {% if bundle_value == '1' or bundle_value == 1 %}selected{% endif %}>1</option>
                    </select>
                    <!-- Hidden input to submit BUNDLE value -->
                    <input type="hidden" name="BUNDLE" value="{{ bundle_value if bundle_value is not none else '0' }}">
                    <br><br>
                {% endif %}
            {% endif %}
        {% endfor %}

        <!-- RECHARGETYPE Field -->
        {% set rechargetype_value = request.form.get('RECHARGETYPE','') or campaign.RECHARGETYPE %}
        <label>RECHARGETYPE:</label>
        <input type="text" name="RECHARGETYPE" value="{{ rechargetype_value if rechargetype_value is not none else '' }}" readonly style="background-color: #f0f0f0;">
        <br><br>

        <!-- BUNDLETYPE Field -->
        {% set bundletype_value = request.form.get('BUNDLETYPE','') or campaign.BUNDLETYPE %}
        <label>BUNDLETYPE:</label>
        <input type="text" name="BUNDLETYPE" value="{{ bundletype_value if bundletype_value is not none else '' }}" readonly style="background-color: #f0f0f0;">
        <br><br>

        <!-- RECHARGERNR Field -->
        {% set rechargernr_value = request.form.get('RECHARGERNR','') or campaign.RECHARGERNR %}
        <label>RECHARGERNR:</label>
        <input type="text" name="RECHARGERNR" value="{{ rechargernr_value if rechargernr_value is not none else '' }}" readonly style="background-color: #f0f0f0;">
        <br><br>

        <!-- RECHARGERBR Field -->
        {% set rechargebr_value = request.form.get('RECHARGERBR','') or campaign.RECHARGERBR %}
        <label>RECHARGERBR:</label>
        <input type="text" name="RECHARGERBR" value="{{ rechargebr_value if rechargebr_value is not none else '' }}" readonly style="background-color: #f0f0f0;">
        <br><br>

        <button type="submit" class="update-btn">Update Campaign</button>
    </form>
</body>
</html>